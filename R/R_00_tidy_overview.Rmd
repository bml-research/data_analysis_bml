---
title: "R Tidy Overview"
author: ""
date: ""
output: 
  prettydoc::html_pretty:
    theme: cayman
    highlight: github
---

![](../hanze/hanze.png)

---

[Go back to the main page](../index.html)  
[Go back to the R overview page](../R/R_01_index.html)  

---

```{r setup, include=FALSE} 
knitr::opts_chunk$set(warning = FALSE, message = FALSE) 
```

This Rmd file can be downloaded [here](./R_00_tidy_overview.Rmd)

```{r}
library(tidyverse)
```


# 📘 Tidyverse Overview

💡 *This page provides a structured overview of core tidyverse functions.  
Click a category to expand and jump to detailed examples.*

The examples shown are performed on the Puromycin dataset. The Puromycin dataset is a classic example dataset built into the base R installation (within the datasets package). It originates from a biochemical experiment and is widely used for demonstrating and testing nonlinear regression models, particularly the Michaelis-Menten kinetics model in enzyme reactions.

```{r}
head(Puromycin)
```


---

## Summary Table (Collapsible)

<details>
<summary><strong>🧩 Row Operations</strong> — `drop_na()`, `filter()`, `slice()`, `arrange()`, `distinct()`, `slice_sample()`, `slice_min()`, `slice_max`</summary>

Select, subset, or reorder rows.  
➡️ [See Row Actions ↓](#row-operations)
</details>

<details>
<summary><strong>📊 Column Operations</strong> — `select()`, `rename()`, `mutate()`, `transmute()`, `relocate()`, `across()`</summary>

Choose, rename, or transform columns.  
➡️ [See Column Actions ↓](#column-operations)
</details>

<details>
<summary><strong>🧮 Grouping & Aggregation</strong> — `group_by()`, `ungroup()`, `summarize()`, `mutate()`, `filter()`</summary>

Split data into groups and compute summaries.  
➡️ [See Group Actions ↓](#grouping)
</details>

<details>
<summary><strong>🔗 Joins & Binding</strong> — `left_join()`, `inner_join()`, `bind_rows()`</summary>

Combine multiple data frames.  
➡️ [See Join Actions ↓](#joins)
</details>

<details>
<summary><strong>🔄 Reshaping Data</strong> — `pivot_longer()`, `pivot_wider()`</summary>

Restructure data between long and wide formats.  
➡️ [See Reshaping ↓](#reshaping)
</details>

<details>
<summary><strong>📈 Visualization</strong> — `ggplot()`, `geom_*()`</summary>

Create and customize plots.  
➡️ [See Visualization ↓](#visualization)
</details>

<details>
<summary><strong>🧰 Utilities</strong> — `glimpse()`, `pull()`, `count()`</summary>

Inspect or extract data quickly.  
➡️ [See Utilities ↓](#utilities)
</details>

---


# Function-Specific Actions with Examples

---

## 🧩 Actions on Rows (Collapsible) {#row-operations}

[⬆️ Back to Summary](#tidyverse-overview)

💡 *This section lists core row operations in the tidyverse.*

<details>
<summary><strong>drop_na()</strong> – Drop rows containing `NA` values</summary>

First create a copy with an `NA` value: 

```{r}
Puro_with_NA <- as.tibble(Puromycin) # create a copy
Puro_with_NA[1, 2] <- NA # replace row 1, column 2 with NA
Puro_with_NA
```

And drop the row with the NA:  

```{r}
# Drop row with NA
Puro_with_NA %>% drop_na() 
```


</details>

<details>
<summary><strong>filter()</strong> – Subset rows based on conditions</summary>

```{r}
# Keep only rows where rate > 200
Puromycin %>% filter(rate > 200)
```

Selects rows that meet logical conditions. Supports multiple conditions with `&` (and) or `|` (or).  
</details>

<details>
<summary><strong>slice()</strong> – Select rows by position</summary>

```{r}
# Keep the first 5 rows
Puromycin %>% slice(1:5)
```

Select rows by numeric positions or helpers like `slice_head()` or `slice_tail()`.  
</details>

<details>
<summary><strong>arrange()</strong> – Reorder rows by variable(s)</summary>

```{r}
# Sort by rate descending
Puromycin %>% arrange(desc(rate))
```

Orders rows by one or more columns. Use `desc()` for descending order.  
</details>

<details>
<summary><strong>distinct()</strong> – Keep unique rows</summary>

```{r}
# Keep unique values of rate
Puromycin %>% distinct(rate)
```

Removes duplicate rows based on one or more columns.  
</details>

<details>
<summary><strong>slice_sample()</strong> – Random sample of rows</summary>

```{r}
# Randomly sample 3 rows
Puromycin %>% slice_sample(n = 3)
```

Randomly selects rows; can sample fractionally with `prop`.  
</details>

<details>
<summary><strong>slice_min()/slice_max()</strong> – Top or bottom rows by value</summary>

```{r}
# 3 rows with highest rate
Puromycin %>% slice_max(rate, n = 3)
```

Select rows with minimum or maximum values of a variable.  
</details>

---

## 📊 Actions on Columns (Collapsible) {#column-operations}

[⬆️ Back to Summary](#tidyverse-overview)

💡 *This section lists core column operations in the tidyverse.*

<details>
<summary><strong>select()</strong> – Choose specific columns</summary>

```{r}
# Select columns conc and rate
Puromycin %>% select(conc, rate)
```

Keeps only the specified columns. Can use helper functions like `starts_with()`, `ends_with()`, or `contains()`.  
</details>

<details>
<summary><strong>rename()</strong> – Rename columns</summary>

```{r}
# Rename conc to conc_ppm
Puromycin %>% rename(conc_ppm = conc)
```

Changes column names without altering the data.  
</details>

<details>
<summary><strong>mutate()</strong> – Add or modify columns</summary>

```{r}
# Add a new column rate_per_conc
Puromycin %>% mutate(rate_per_conc = rate / conc)
```

Creates new columns or modifies existing ones using expressions.  
</details>

<details>
<summary><strong>transmute()</strong> – Create new columns and drop others</summary>

```{r}
# Keep only rate_per_conc column
Puromycin %>% transmute(rate_per_conc = rate / conc)
```

Generates new columns and drops all others in the output.  
</details>

<details>
<summary><strong>relocate()</strong> – Move columns to new positions</summary>

```{r}
# Move state column to the first position
Puromycin %>% relocate(state, .before = 1)
```

Reorders columns without changing data.  
</details>

<details>
<summary><strong>across()</strong> – Apply functions to multiple columns</summary>

```{r}
# Convert all numeric columns to log scale
Puromycin %>% mutate(across(where(is.numeric), log))
```

Applies a function across selected columns, often used inside `mutate()` or `summarize()`.  
</details>

---

## 🧮 Actions on Groups (Collapsible) {#grouping}

[⬆️ Back to Summary](#tidyverse-overview)

💡 *This section lists core grouping operations in the tidyverse.*

<details>
<summary><strong>group_by()</strong> – Group data by one or more variables</summary>

```{r}
# Group by conc
Puromycin %>% group_by(conc)
```

Creates groups in the data for subsequent summarization or manipulation.  
</details>

<details>
<summary><strong>ungroup()</strong> – Remove grouping</summary>

```{r}
# Remove grouping
Puromycin %>% group_by(conc) %>% ungroup()
```

Removes existing groups, returning data to normal ungrouped structure.  
</details>

<details>
<summary><strong>summarize()</strong> – Compute summary statistics by group</summary>

```{r}
# Average rate by conc
Puromycin %>% group_by(conc) %>% summarize(avg_rate = mean(rate))
```

Aggregates data within each group to produce summary statistics. Often combined with `group_by()`.  
</details>

<details>
<summary><strong>mutate() with groups</strong> – Add or modify columns within groups</summary>

```{r}
# Compute rank of rate within each conc group
Puromycin %>% group_by(conc) %>% mutate(rank_rate = rank(rate))
```

Performs column transformations separately within each group.  
</details>

<details>
<summary><strong>filter() with groups</strong> – Subset rows within groups</summary>

```{r}
# Keep top 1 rate rows within each conc group
Puromycin %>% group_by(conc) %>% slice_max(rate, n = 1)
```

Allows row selection within each group, keeping group-wise logic intact.  
</details>

---

## 🧮 Joins & Bindings (Collapsible) {#joins}

[⬆️ Back to Summary](#tidyverse-overview)

💡 *This section lists core joining operations in the tidyverse.*

<details>
<summary><strong>left_join()</strong> – A join combines rows from two data frames based on a common key.</summary>

```{r}

# Create a copy of puromycin
puromycin <- as_tibble(Puromycin)
head(puromycin)
```

```{r}
# Create a second dataset with additional info
treatment_info <- tibble(
  state = c("treated", "untreated"),
  description = c("Received Puromycin", "Control group")
)
head(treatment_info)
```


```{r}
# Left join: add treatment descriptions
left_join(puromycin, treatment_info, by = "state")
```

Thus:  

- `Left_join(puromycin, treatment_info, by = "state")` merges the description column into the puromycin dataset by matching the state column.  
- Every row in puromycin keeps its original data. The description column is added based on the matching state.  

</details>


<details>
<summary><strong>bind_cols()</strong> – Binding combines data frames either by rows (bind_rows) or by columns (bind_cols).</summary>

```{r}
# Split Puromycin into two groups
treated <- puromycin %>% filter(state == "treated")
untreated <- puromycin %>% filter(state == "untreated")

treated # Show treated, 12 rows
```

```{r}
# Row binding: recombine after filtering
bind_rows(treated, untreated) # now 23 rows
```



```{r}
# Column binding: add an extra column
extra_info <- tibble(source = rep("Lab A", nrow(puromycin)))
extra_info
```

```{r}
bind_cols(puromycin, extra_info) # Columns bound
```

Thus:  
- `bind_rows()` is for stacking datasets vertically (more rows).  
- `bind_cols()` is for combining datasets horizontally (more columns).  

</details>

---

## 🧮 Reshaping Data (Collapsible) {#reshaping}

[⬆️ Back to Summary](#tidyverse-overview)

💡 *This section lists restructure operations of data between long and wide formats. in the tidyverse.*

<details>
<summary><strong>pivot_wider()</strong> – Spread key-value pairs across multiple columns. This is useful when you want to separate values into distinct columns.</summary>

First create an extra column with replicates:  

```{r}
Puromycin_reps <- Puromycin %>%
  mutate(replicate = rep(1:2, length.out = n()))
Puromycin_reps
```

Now make the data wide:  

```{r}
Puromycin_wide <- Puromycin_reps %>% pivot_wider(names_from = replicate, values_from = rate)
Puromycin_wide
```

</details>

<details>
<summary><strong>pivot_longer()</strong> – Convert columns into key-value pairs. This is useful when you want to gather multiple columns into a single column.</summary>

```{r}
Puromycin_long <- Puromycin_wide %>% pivot_longer(cols = c("1", "2"),
             names_to = "replicate", values_to = "rate"
)
Puromycin_long
```


</details>


---

## Backup (under construction)

---

## 1. Actions on Rows

| Function | Description |
|-----------|--------------|
| `drop_na(df, col)` | Drop all rows for which `col` shows an NA value |
| `drop_na(df, col1, col2, …)` | Drop all rows for which `col1` and/or `col2` show NA values |
| `drop_na(df)` or `drop_na(df, everything())` | Drop all rows where any column has an NA value |
| `slice(df, rownr)` | Pick all data from row number `rownr` |
| `slice(df, c(nr1, nr2, …))` | Pick all data from row numbers `nr1`, `nr2`, etc. |
| `slice_head(df, n = n, prop = prop)` | Pick the first `n` rows (or fraction `prop`) of the data frame |
| `slice_tail(df, n = n, prop = prop)` | Pick the last `n` rows (or fraction `prop`) of the data frame |
| `slice_min(df, col)` | Pick the row with the smallest value of `col` |
| `slice_max(df, col)` | Pick the row with the largest value of `col` |
| `slice_sample(df, n = n, prop = prop)` | Pick `n` random rows (or fraction `prop`) of the data frame |
| `filter(df, col > value)` | Filter rows for which `col` has data greater than `value` |
| *(Other filter options)* | `col >`, `>=`, `<`, `<=`, `==`, `!=`, `!(condition)`, or `between(col, a, b)` |
| `arrange(df, col)` | Sort the data frame by increasing values of `col` |
| `arrange(col1, col2)` | Sort by `col1`, then by `col2` within each `col1` group |
| `arrange(desc(col))` | Sort the data frame by decreasing values of `col` |


---

## 2. Actions on Columns

| Function | Description |
|-----------|--------------|
| `select(df, col1, col2, …)` | Select only columns `col1`, `col2`, etc. |
| `select(df, -col1)` | Select all columns except `col1` |
| `select(df, col1:col3)` | Select columns from `col1` through `col3` |
| `select(df, starts_with("string"))` | Select columns whose names start with `"string"` |
| `select(df, ends_with("string"))` | Select columns whose names end with `"string"` |
| `select(df, contains("string"))` | Select columns whose names contain `"string"` |
| `select(df, where(is.character))` | Select only character columns |
| `select(df, where(is.numeric))` | Select only numeric columns |
| `select(df, everything())` | Select all columns |
| `select(df, newname1 = col1, newname2 = col2, …)` | Select and rename columns |
| `pull(df, col)` | Get the values of a column as a vector |
| `pull(df, colnr)` | Get the values of column number `colnr` (counting from left) as a vector |
| `pull(df, -colnr)` | Get the values of column number `colnr` (counting from right) as a vector |



---

## 3. Actions with Groups

| Function | Description |
|-----------|--------------|
| `group_by(df, col)` | Create grouped tibbles based on levels of `col` |
| `group_by(df, col1, col2)` | Create nested grouped tibbles based on levels of `col1` and `col2` |
| `summarize(df, newname1 = funct1(col1), newname2 = funct2(col2), …)` | Make a summary table applying functions to grouped columns |
| *(Function options)* | `mean()`, `median()`, `sd()`, `IQR()`, each with optional `na.rm = TRUE` |
| `ungroup(df)` | Combine all sub-tibbles back into one tibble |



---

[Go back to the main page](../index.html)  
[Go back to the R overview page](../R/R_01_index.html)  
<a href="#top">⬆️ Back to Top</a>  

---


>This web page is distributed under the terms of the Creative Commons Attribution License which permits unrestricted use, distribution, and reproduction in any medium, provided the original author and source are credited.
>Creative Commons License: CC BY-SA 4.0.

